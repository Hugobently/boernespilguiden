# BÃ¸rnespilguiden - Complete Project Documentation

> **Last Updated:** 2026-02-05
> **Version:** 1.0.0
> **Status:** Production (Live at boernespilguiden.dk)

---

## Table of Contents

1. [Project Overview](#1-project-overview)
2. [Tech Stack](#2-tech-stack)
3. [Directory Structure](#3-directory-structure)
4. [Database Schema](#4-database-schema)
5. [Components Architecture](#5-components-architecture)
6. [API Endpoints](#6-api-endpoints)
7. [Configuration & Environment](#7-configuration--environment)
8. [Content Statistics](#8-content-statistics)
9. [Development Guide](#9-development-guide)
10. [Deployment](#10-deployment)
11. [Known Issues & Technical Debt](#11-known-issues--technical-debt)
12. [Future Improvements](#12-future-improvements)
13. [Quick Reference](#13-quick-reference)

---

## 1. Project Overview

### What is BÃ¸rnespilguiden?

BÃ¸rnespilguiden (Danish for "Children's Game Guide") is a comprehensive Danish website that helps parents find age-appropriate games, apps, and streaming content for children aged 0-10 years.

### Target Audience

- **Primary:** Danish parents with children aged 0-10
- **Secondary:** Grandparents, teachers, caregivers

### Core Features

- **Digital Games:** 111 reviewed apps and games with age ratings, parent tips, and safety info
- **Board Games:** 72+ physical board games with age recommendations
- **Film & Serier:** 194 movies and TV shows with streaming availability
- **Search:** Cross-content search with filters
- **Age Filters:** Filter content by age groups (0-3, 3-6, 7+)
- **Danish Language Filter:** Find games with Danish audio/text
- **AI-Enhanced Content:** Every item has parent tips, pros/cons generated by Claude AI

### Live URLs

- **Production:** https://boernespilguiden.dk
- **Vercel Dashboard:** https://vercel.com/hugobently/boernespilguiden
- **GitHub:** https://github.com/Hugobently/boernespilguiden

---

## 2. Tech Stack

### Frontend
| Technology | Version | Purpose |
|------------|---------|---------|
| Next.js | 14.2.35 | React framework with App Router |
| React | 18.x | UI library |
| TypeScript | 5.x | Type safety |
| Tailwind CSS | 3.x | Styling |
| next-intl | latest | Internationalization (da, en) |

### Backend
| Technology | Version | Purpose |
|------------|---------|---------|
| Next.js API Routes | 14.x | Backend API |
| Prisma ORM | 5.x | Database access |
| PostgreSQL | 15+ | Production database |
| Prisma Accelerate | - | Connection pooling |

### External Services
| Service | Purpose |
|---------|---------|
| Vercel | Hosting & deployment |
| Prisma (Accelerate) | Database hosting |
| TMDB API | Movie/TV metadata |
| Anthropic Claude | AI content generation |
| iTunes Search API | App icon fetching |

### Development Tools
| Tool | Purpose |
|------|---------|
| ESLint | Code linting |
| Prettier | Code formatting |
| tsx | TypeScript script execution |
| Puppeteer MCP | Browser automation for testing |

---

## 3. Directory Structure

```
boernespilguiden/
â”œâ”€â”€ app/                              # Next.js App Router
â”‚   â”œâ”€â”€ layout.tsx                    # Root layout
â”‚   â”œâ”€â”€ error.tsx                     # Error boundary
â”‚   â”œâ”€â”€ sitemap.ts                    # Dynamic sitemap
â”‚   â”œâ”€â”€ api/                          # API routes
â”‚   â”‚   â”œâ”€â”€ admin/                    # Admin endpoints (protected)
â”‚   â”‚   â”‚   â”œâ”€â”€ enhance-media/        # AI enhancement trigger
â”‚   â”‚   â”‚   â”œâ”€â”€ import/               # Data import
â”‚   â”‚   â”‚   â”œâ”€â”€ init-db/              # Database initialization
â”‚   â”‚   â”‚   â”œâ”€â”€ migrate-media/        # Media migration
â”‚   â”‚   â”‚   â””â”€â”€ reimport-tmdb/        # TMDB reimport
â”‚   â”‚   â”œâ”€â”€ analytics/                # Event tracking
â”‚   â”‚   â”œâ”€â”€ boardgames/               # Board game CRUD
â”‚   â”‚   â”œâ”€â”€ games/                    # Digital game CRUD
â”‚   â”‚   â”œâ”€â”€ search/                   # Search with suggestions
â”‚   â”‚   â”œâ”€â”€ set-locale/               # Language preference
â”‚   â”‚   â””â”€â”€ cron/daily-update/        # Scheduled jobs
â”‚   â””â”€â”€ (site)/                       # Public website (route group)
â”‚       â”œâ”€â”€ page.tsx                  # Homepage
â”‚       â”œâ”€â”€ layout.tsx                # Site layout with header/footer
â”‚       â”œâ”€â”€ spil/                     # Digital games section
â”‚       â”‚   â”œâ”€â”€ page.tsx              # Games listing
â”‚       â”‚   â”œâ”€â”€ [slug]/page.tsx       # Game detail
â”‚       â”‚   â””â”€â”€ kategori/[age]/       # Age category pages
â”‚       â”œâ”€â”€ braetspil/                # Board games section
â”‚       â”œâ”€â”€ film-serier/              # Movies & TV section
â”‚       â”‚   â”œâ”€â”€ page.tsx              # Media listing
â”‚       â”‚   â””â”€â”€ [slug]/page.tsx       # Media detail
â”‚       â”œâ”€â”€ soeg/                     # Search page
â”‚       â”œâ”€â”€ om/                       # About page
â”‚       â”œâ”€â”€ kontakt/                  # Contact page
â”‚       â”œâ”€â”€ cookiepolitik/            # Cookie policy
â”‚       â””â”€â”€ privatlivspolitik/        # Privacy policy
â”‚
â”œâ”€â”€ components/                       # React components
â”‚   â”œâ”€â”€ ui/                           # Atomic UI primitives
â”‚   â”‚   â”œâ”€â”€ Button.tsx, Badge.tsx
â”‚   â”‚   â”œâ”€â”€ Card.tsx, Input.tsx
â”‚   â”‚   â”œâ”€â”€ Rating.tsx, AgeIndicator.tsx
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ layout/                       # Layout components
â”‚   â”‚   â”œâ”€â”€ Header.tsx (510 lines)    # Main navigation
â”‚   â”‚   â”œâ”€â”€ Footer.tsx
â”‚   â”‚   â”œâ”€â”€ Navigation.tsx
â”‚   â”‚   â”œâ”€â”€ LanguageSwitcher.tsx
â”‚   â”‚   â””â”€â”€ CookieConsent.tsx
â”‚   â”œâ”€â”€ games/                        # Game components
â”‚   â”‚   â”œâ”€â”€ GameCard.tsx (574 lines)  # Game card with badges
â”‚   â”‚   â”œâ”€â”€ GameDetail.tsx (660 lines)# Full game view
â”‚   â”‚   â”œâ”€â”€ GameGrid.tsx              # Grid layout
â”‚   â”‚   â”œâ”€â”€ LazyGameGrid.tsx          # Virtualized grid
â”‚   â”‚   â””â”€â”€ ParentInfo.tsx            # Parent information section
â”‚   â”œâ”€â”€ filters/                      # Filter components
â”‚   â”‚   â”œâ”€â”€ AgeFilter.tsx             # Age group selector
â”‚   â”‚   â”œâ”€â”€ CategoryFilter.tsx
â”‚   â”‚   â”œâ”€â”€ SearchBar.tsx
â”‚   â”‚   â””â”€â”€ ParentFilters.tsx
â”‚   â”œâ”€â”€ media/                        # Media components
â”‚   â”‚   â”œâ”€â”€ MediaCard.tsx
â”‚   â”‚   â”œâ”€â”€ MediaParentInfo.tsx
â”‚   â”‚   â””â”€â”€ StreamingBadges.tsx
â”‚   â”œâ”€â”€ affiliate/                    # Affiliate links
â”‚   â””â”€â”€ tracking/                     # Analytics
â”‚
â”œâ”€â”€ lib/                              # Shared utilities
â”‚   â”œâ”€â”€ db.ts                         # Prisma client singleton
â”‚   â”œâ”€â”€ utils.ts                      # Helper functions
â”‚   â”œâ”€â”€ types.ts                      # TypeScript types
â”‚   â”œâ”€â”€ cache.ts (310 lines)          # Caching layer
â”‚   â”œâ”€â”€ translations.ts               # Translation helpers
â”‚   â”œâ”€â”€ analytics.ts                  # Analytics tracking
â”‚   â”œâ”€â”€ search.ts                     # Search utilities
â”‚   â”œâ”€â”€ seo.tsx                       # SEO helpers
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ age-groups.ts             # Age group configuration
â”‚   â”œâ”€â”€ constants/
â”‚   â”‚   â””â”€â”€ blacklist.ts              # Content blacklist
â”‚   â””â”€â”€ services/                     # External services
â”‚       â”œâ”€â”€ ai-enhance.ts             # Media AI enhancement
â”‚       â”œâ”€â”€ ai-enhance-game.ts        # Game AI enhancement
â”‚       â”œâ”€â”€ tmdb.ts                   # TMDB API client
â”‚       â”œâ”€â”€ tmdb-import.ts            # TMDB data import
â”‚       â””â”€â”€ dr-import.ts              # DR (Danish Radio) import
â”‚
â”œâ”€â”€ prisma/
â”‚   â”œâ”€â”€ schema.prisma                 # Database schema
â”‚   â”œâ”€â”€ migrations/                   # Database migrations
â”‚   â””â”€â”€ seed.ts                       # Seed data
â”‚
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â”œâ”€â”€ games/
â”‚   â”‚   â”‚   â”œâ”€â”€ digital/              # 119 game icons
â”‚   â”‚   â”‚   â””â”€â”€ board/                # 70 board game images
â”‚   â”‚   â””â”€â”€ media/                    # Media posters (if local)
â”‚   â””â”€â”€ fonts/
â”‚
â”œâ”€â”€ scripts/                          # Maintenance scripts
â”‚   â”œâ”€â”€ check-stats.ts                # Database statistics
â”‚   â”œâ”€â”€ enhance-media.ts              # AI enhancement for media
â”‚   â”œâ”€â”€ fetch-game-media.ts           # Fetch game media
â”‚   â”œâ”€â”€ fetch-game-media-enhanced.ts  # Enhanced media fetching
â”‚   â”œâ”€â”€ update-game-media.ts          # Update game media in DB
â”‚   â””â”€â”€ migrate-media-to-db.ts        # Migrate media to DB
â”‚
â”œâ”€â”€ messages/                         # i18n translations
â”‚   â”œâ”€â”€ da.json                       # Danish
â”‚   â””â”€â”€ en.json                       # English
â”‚
â””â”€â”€ [config files]
    â”œâ”€â”€ package.json
    â”œâ”€â”€ tsconfig.json
    â”œâ”€â”€ tailwind.config.ts
    â”œâ”€â”€ next.config.ts
    â””â”€â”€ .env                          # Environment variables
```

---

## 4. Database Schema

### Entity Relationship Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Game     â”‚     â”‚   BoardGame     â”‚     â”‚     Media     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id          â”‚     â”‚ id              â”‚     â”‚ id            â”‚
â”‚ slug*       â”‚     â”‚ slug*           â”‚     â”‚ slug*         â”‚
â”‚ title       â”‚     â”‚ title           â”‚     â”‚ tmdbId*       â”‚
â”‚ description â”‚     â”‚ description     â”‚     â”‚ drEntityId*   â”‚
â”‚ minAge      â”‚     â”‚ minAge          â”‚     â”‚ title         â”‚
â”‚ maxAge      â”‚     â”‚ maxAge          â”‚     â”‚ type          â”‚
â”‚ platforms[] â”‚     â”‚ minPlayers      â”‚     â”‚ posterUrl     â”‚
â”‚ iconUrl     â”‚     â”‚ maxPlayers      â”‚     â”‚ ageMin        â”‚
â”‚ rating      â”‚     â”‚ playTime        â”‚     â”‚ ageMax        â”‚
â”‚ parentInfo  â”‚     â”‚ complexity      â”‚     â”‚ parentInfo    â”‚
â”‚ pros[]      â”‚     â”‚ imageUrl        â”‚     â”‚ pros[]        â”‚
â”‚ cons[]      â”‚     â”‚ rating          â”‚     â”‚ cons[]        â”‚
â”‚ ...         â”‚     â”‚ ...             â”‚     â”‚ ...           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                                             â”‚
      â”‚                                             â”‚ 1:N
      â–¼                                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GameTranslation â”‚                     â”‚  StreamingInfo    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id              â”‚                     â”‚ id                â”‚
â”‚ gameId (FK)     â”‚                     â”‚ mediaId (FK)      â”‚
â”‚ locale          â”‚                     â”‚ provider          â”‚
â”‚ title           â”‚                     â”‚ available         â”‚
â”‚ description     â”‚                     â”‚ isFree            â”‚
â”‚ ...             â”‚                     â”‚ url               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Key Models

#### Game (Digital Games)
```prisma
model Game {
  id                    String    @id @default(cuid())
  slug                  String    @unique
  title                 String
  developer             String?
  description           String    @db.Text
  shortDescription      String?

  // Age & Categories
  minAge                Int       @default(0)
  maxAge                Int       @default(99)
  ageGroup              String?   // "0-3" | "3-6" | "7+"
  categories            String    @default("[]")  // JSON array
  skills                String    @default("[]")
  themes                String    @default("[]")

  // Platform & Pricing
  platforms             String    @default("[]")  // iOS|Android|PC|Nintendo|PlayStation|Xbox|Web
  priceModel            String?   // gratis|engangskÃ¸b|abonnement|freemium

  // Ratings & Content
  rating                Float     @default(0)
  iconUrl               String?
  screenshots           String    @default("[]")

  // AI-Generated Parent Content
  parentInfo            String?   @db.Text  // "Hvad forÃ¦ldre skal vide"
  parentTip             String?   @db.Text  // Practical tip
  pros                  String    @default("[]")
  cons                  String    @default("[]")

  // Safety Flags
  hasAds                Boolean   @default(false)
  hasInAppPurchases     Boolean   @default(false)
  hasChat               Boolean   @default(false)
  hasScaryContent       Boolean   @default(false)
  supportsDanish        Boolean   @default(false)

  // Status
  featured              Boolean   @default(false)
  editorChoice          Boolean   @default(false)
  isActive              Boolean   @default(true)
}
```

#### Media (Movies & TV Shows)
```prisma
model Media {
  id                    String    @id @default(cuid())
  tmdbId                Int?      @unique
  drEntityId            String?   @unique
  slug                  String    @unique
  type                  String    // "MOVIE" | "SERIES"
  title                 String
  description           String?   @db.Text

  // Age & Content
  ageMin                Int?
  ageMax                Int?
  genres                String[]

  // Media Info
  posterUrl             String?
  releaseDate           DateTime?
  runtime               Int?
  seasons               Int?

  // AI-Generated
  parentInfo            String?   @db.Text
  parentTip             String?   @db.Text
  pros                  String[]
  cons                  String[]

  // Language
  isDanish              Boolean   @default(false)
  hasDanishAudio        Boolean   @default(false)
  hasDanishSubtitles    Boolean   @default(false)

  // Source & Status
  source                String    // "TMDB" | "DR_MANUAL" | "MANUAL"
  isActive              Boolean   @default(true)
  isFeatured            Boolean   @default(false)

  // Relations
  streamingInfo         StreamingInfo[]
}
```

### Important Field Notes

| Model | Field | Note |
|-------|-------|------|
| Game | `iconUrl` | NOT `imageUrl` - uses filesystem fallback to `/images/games/digital/{slug}.jpg` |
| Game | `platforms` | JSON string array, NOT native Prisma array |
| Game | `pros/cons` | JSON string `"[]"`, different from Media which uses `String[]` |
| BoardGame | `imageUrl` | Uses filesystem fallback to `/images/games/board/{slug}.jpg` |
| Media | `source` | **Required** - Must be "TMDB", "DR_MANUAL", or "MANUAL" |
| Media | `type` | **Required** - Must be "MOVIE" or "SERIES" |

---

## 5. Components Architecture

### Component Categories

#### UI Components (`components/ui/`)
Atomic, reusable primitives without business logic.

| Component | Purpose | Props |
|-----------|---------|-------|
| `Button` | Clickable button | variant, size, disabled |
| `Badge` | Label/tag | variant, color |
| `Card` | Container | children, className |
| `Rating` | Star rating | value, max, size |
| `AgeIndicator` | Age badge | minAge, maxAge |

#### Layout Components (`components/layout/`)
Page structure and navigation.

| Component | Lines | Purpose |
|-----------|-------|---------|
| `Header` | 510 | Navigation, search, language switcher |
| `Footer` | ~200 | Footer links, copyright |
| `Navigation` | ~100 | Breadcrumbs, nav links |
| `CookieConsent` | ~100 | GDPR cookie banner |

#### Game Components (`components/games/`)
Game-specific display components.

| Component | Lines | Purpose |
|-----------|-------|---------|
| `GameCard` | 574 | Card display with badges, rating, platforms |
| `GameDetail` | 660 | Full game page view |
| `GameGrid` | ~100 | Grid layout for game cards |
| `ParentInfo` | ~150 | Parent tips and safety info |

#### Filter Components (`components/filters/`)
User filtering controls.

| Component | Purpose |
|-----------|---------|
| `AgeFilter` | Age group selector (0-3, 3-6, 7+) |
| `CategoryFilter` | Category multi-select |
| `SearchBar` | Search input with suggestions |
| `ParentFilters` | Safety filters (ads, purchases, etc.) |

### Shared Configuration

Age groups are defined in `lib/config/age-groups.ts` (shared between server and client):

```typescript
export const ageGroups = [
  { slug: '0-3', label: '0-3 Ã¥r', emoji: 'ğŸ‘¶', color: { bg: '#FFD1DC', text: '#8B4563' } },
  { slug: '3-6', label: '3-6 Ã¥r', emoji: 'ğŸ§’', color: { bg: '#BAFFC9', text: '#2D6A4F' } },
  { slug: '7+',  label: '7+ Ã¥r',  emoji: 'ğŸ‘¦', color: { bg: '#BAE1FF', text: '#1D4E89' } },
];
```

---

## 6. API Endpoints

### Public Endpoints

| Method | Endpoint | Purpose | Parameters |
|--------|----------|---------|------------|
| GET | `/api/games` | List games | `limit`, `offset`, `age`, `category`, `platform` |
| GET | `/api/games/[slug]` | Get single game | - |
| GET | `/api/games/featured` | Featured games | `limit` |
| GET | `/api/boardgames` | List board games | `limit`, `offset`, `age` |
| GET | `/api/boardgames/[slug]` | Get single board game | - |
| GET | `/api/search` | Search all content | `q`, `type`, `limit` |
| POST | `/api/analytics` | Track events | `event`, `data` |
| POST | `/api/set-locale` | Set language | `locale` |

### Admin Endpoints (Protected)

| Method | Endpoint | Purpose |
|--------|----------|---------|
| POST | `/api/admin/enhance-media` | Trigger AI enhancement |
| POST | `/api/admin/import` | Import data from sources |
| POST | `/api/admin/init-db` | Initialize database |
| POST | `/api/admin/reimport-tmdb` | Reimport from TMDB |
| POST | `/api/admin/migrate-media` | Run media migrations |

### Cron Endpoints

| Method | Endpoint | Schedule | Purpose |
|--------|----------|----------|---------|
| GET | `/api/cron/daily-update` | Daily | Update streaming availability |

---

## 7. Configuration & Environment

### Environment Variables

Create a `.env` file in the project root:

```bash
# Database (PostgreSQL via Prisma)
DATABASE_URL="postgres://user:password@db.prisma.io:5432/postgres"
PRISMA_DATABASE_URL="prisma+postgres://accelerate.prisma-data.net/?api_key=..."

# External APIs
TMDB_API_KEY="your_tmdb_api_key"
ANTHROPIC_API_KEY="your_anthropic_api_key"

# Optional
NEXT_PUBLIC_SITE_URL="https://boernespilguiden.dk"
```

### Where to Get API Keys

| Service | URL | Purpose |
|---------|-----|---------|
| Prisma | Vercel Dashboard â†’ Environment Variables | Database connection |
| TMDB | https://www.themoviedb.org/settings/api | Movie/TV data |
| Anthropic | https://console.anthropic.com/ | AI content generation |

### Important Notes

1. **Never use SQLite in production** - The `.env` may have `DATABASE_URL="file:./dev.db"` which is wrong
2. **Prisma Accelerate** is required for connection pooling in serverless environments
3. **API keys** should never be committed to git

---

## 8. Content Statistics

### Current Content (as of 2026-02-05)

| Content Type | Total | AI Enhanced | With Images |
|--------------|-------|-------------|-------------|
| Digital Games | 124 | 124 (100%) | 124 (100%) |
| Board Games | 73 | N/A | ~70 (96%) |
| Movies & TV | 194 | 194 (100%) | 194 (100%) |

### Streaming Providers

| Provider | Items | Free |
|----------|-------|------|
| DR TV | 65 | Yes |
| Netflix | 45 | No |
| Disney+ | 35 | No |
| Apple TV+ | 40 | No |
| Filmstriben | 20 | Yes (library) |

### Languages

- **Games with Danish:** 11 games support Danish language
- **Media in Danish:** 65+ Danish productions

---

## 9. Development Guide

### Getting Started

```bash
# Clone repository
git clone https://github.com/Hugobently/boernespilguiden.git
cd boernespilguiden

# Install dependencies
npm install

# Set up environment
cp .env.example .env
# Edit .env with your API keys

# Generate Prisma client
npx prisma generate

# Run development server
npm run dev
```

### Common Tasks

#### Check Database Stats
```bash
npx tsx scripts/check-stats.ts
```

#### Run AI Enhancement on Media
```bash
npx tsx scripts/enhance-media.ts <limit> [--force]
```

#### Fetch Game Media
```bash
npx tsx scripts/fetch-game-media-enhanced.ts
```

#### Update Game Media in Database
```bash
npx tsx scripts/update-game-media.ts
```

### Code Style

- **TypeScript:** Strict mode enabled
- **Formatting:** Prettier with default settings
- **Linting:** ESLint with Next.js config
- **Commits:** Conventional commits (`feat:`, `fix:`, `docs:`)

### Testing

```bash
# Type checking
npm run type-check

# Linting
npm run lint

# Build (also runs type check)
npm run build
```

---

## 10. Deployment

### Vercel Deployment

The project auto-deploys to Vercel on push to `main`.

#### Manual Deployment
```bash
# Install Vercel CLI
npm i -g vercel

# Deploy
vercel --prod
```

### Environment Setup on Vercel

1. Go to Vercel Dashboard â†’ Project â†’ Settings â†’ Environment Variables
2. Add all variables from `.env`
3. Ensure `DATABASE_URL` points to PostgreSQL (not SQLite)

### Build Configuration

| Setting | Value |
|---------|-------|
| Framework | Next.js |
| Build Command | `npm run build` |
| Output Directory | `.next` |
| Node Version | 18.x |

---

## 11. Known Issues & Technical Debt

### High Priority

1. **Large Component Files**
   - `GameCard.tsx`: 574 lines - should split into sub-components
   - `Header.tsx`: 510 lines - extract SearchInput, MobileMenu
   - `GameDetail.tsx`: 660 lines - extract sections

2. **Duplicate Configuration**
   - Platform icons defined in 3 places
   - Age group colors defined in 4 places
   - Should centralize in `lib/config/`

3. **JSON String vs Array Inconsistency**
   - `Game.pros/cons` uses JSON string `"[]"`
   - `Media.pros/cons` uses native `String[]`
   - Should normalize schema

### Medium Priority

4. **No API Input Validation**
   - Query parameters not validated
   - Should add Zod schema validation

5. **No Rate Limiting**
   - API endpoints have no rate limit
   - Could be abused for scraping

6. **Missing Tests**
   - No unit tests
   - No integration tests
   - No E2E tests

### Low Priority

7. **Search Optimization**
   - Every keystroke triggers API call
   - Should cache previous searches

8. **Image Loading**
   - No explicit width/height on some Image components
   - May cause CLS issues

---

## 12. Future Improvements

### High Priority (User Features)
- [ ] User reviews & ratings (requires auth)
- [ ] Favorites/wishlist
- [ ] "Game of the Week" feature

### Medium Priority
- [ ] Compare function (2-3 games side-by-side)
- [ ] Age calculator ("My child is born [date]")
- [ ] Print-friendly version
- [ ] Extended parent guides (blog/articles)

### Low Priority
- [ ] Dark mode
- [ ] Push notifications
- [ ] Game recommendation quiz
- [ ] Community forum

### Technical Improvements
- [ ] Add unit tests (Jest)
- [ ] Add E2E tests (Playwright)
- [ ] Implement ISR for game pages
- [ ] Add rate limiting
- [ ] Split large components
- [ ] Centralize configuration

---

## 13. Quick Reference

### File Locations

| What | Where |
|------|-------|
| Game icons | `/public/images/games/digital/{slug}.jpg` |
| Board game images | `/public/images/games/board/{slug}.jpg` |
| Age group config | `/lib/config/age-groups.ts` |
| Database schema | `/prisma/schema.prisma` |
| Translations | `/messages/da.json`, `/messages/en.json` |
| API routes | `/app/api/` |
| Page routes | `/app/(site)/` |

### Important Commands

```bash
# Development
npm run dev              # Start dev server
npm run build            # Production build
npm run lint             # Run linter

# Database
npx prisma studio        # Open Prisma Studio
npx prisma db push       # Push schema changes
npx prisma generate      # Regenerate client

# Scripts
npx tsx scripts/check-stats.ts              # Database stats
npx tsx scripts/enhance-media.ts            # AI enhance media
npx tsx scripts/fetch-game-media-enhanced.ts # Fetch game media
```

### Contact

- **Email:** boernespilguiden@proton.me
- **Website:** https://boernespilguiden.dk

---

*Last updated: 2026-02-05. For updates, edit this file directly.*
